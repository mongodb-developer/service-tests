test_kind: js_test

selector:
  roots:
  - jstests/core/**/*.js
  exclude_files:
  - jstests/core/txns/**/*.js

 # Tests causing Cosmos to hang (counted as a failure)
  - jstests/core/index/geo/geo_s2twofields.js
 # Tests excluded for various reasons (req admin perms, not applicable to DBaaS, require additional configuration, etc)
  - jstests/core/administrative/profile/profile_getmore.js
  - jstests/core/json_schema/bsontype.js
  - jstests/core/administrative/current_op/currentop_cursors.js
  - jstests/core/administrative/current_op/currentop_shell.js
  - jstests/core/administrative/current_op/currentop_waiting_for_latch.js
  - jstests/core/administrative/list_all_local_sessions.js
  - jstests/core/administrative/profile/profile_find.js
  - jstests/core/administrative/profile/profile_hide_index.js
  - jstests/core/administrative/validate_db_metadata_command.js
  - jstests/core/api/api_version_parameters.js
  - jstests/core/api/api_version_test_expression.js
  - jstests/core/catalog/list_indexes.js
  - jstests/core/clustered/clustered_collection_creation.js
  - jstests/core/commands_with_uuid.js
  - jstests/core/comment_field.js
  - jstests/core/disallow_query_wrapped_cmd_format.js
  - jstests/core/disallow_system_views_user_writes.js
  - jstests/core/exhaust.js
  - jstests/core/failcommand_failpoint.js
  - jstests/core/find_with_resume_after_param.js
  - jstests/core/fsync.js
  - jstests/core/hash.js
  - jstests/core/illegal_cmd_namespace.js
  - jstests/core/index/hidden_index.js
  - jstests/core/index/index9.js
  - jstests/core/index/index_filter_commands_invalidate_plan_cache_entries.js
  - jstests/core/index/index_id_options.js
  - jstests/core/index/index_stats.js
  - jstests/core/index/indexj.js
  - jstests/core/index/wildcard/wildcard_index_cached_plans.js
  - jstests/core/latch_analyzer.js
  - jstests/core/local_tail_capped.js
  - jstests/core/query/elemmatch/elemmatch_or_pushdown_paths.js
  - jstests/core/query/explode_for_sort_plan_cache.js
  - jstests/core/query/expr/expr_index_use.js
  - jstests/core/query/index_key_expression.js
  - jstests/core/query/internal_rename_if_options_and_indexes_match.js
  - jstests/core/query/objid/objid5.js
  - jstests/core/query/plan_cache/collation_plan_cache.js
  - jstests/core/query/plan_cache/plan_cache_list_plans.js
  - jstests/core/query/plan_cache/plan_cache_list_shapes.js
  - jstests/core/query/plan_cache/plan_cache_shell_helpers.js
  - jstests/core/query/query_hash_stability.js
  - jstests/core/query/queryoptimizera.js
  - jstests/core/read_after_optime.js
  - jstests/core/roles_info.js
  - jstests/core/shell/collection_save.js
  - jstests/core/timeseries/bucket_granularity.js
  - jstests/core/timeseries/timeseries_delete_hint.js
  - jstests/core/timeseries/timeseries_delete_with_meta_concurrent.js
  - jstests/core/timeseries/timeseries_index_stats.js
  - jstests/core/timeseries/timeseries_internal_bounded_sort.js
  - jstests/core/timeseries/timeseries_internal_bounded_sort_compound.js
  - jstests/core/timeseries/timeseries_internal_bounded_sort_compound_mixed_types.js
  - jstests/core/timeseries/timeseries_internal_bounded_sort_overflow.js
  - jstests/core/timeseries/timeseries_update_concurrent.js
  - jstests/core/timeseries/timeseries_update_hint.js
  - jstests/core/transaction_too_large_for_cache.js
  - jstests/core/transaction_too_large_for_cache_query_exec.js
  - jstests/core/version_api_list_commands_verification.js
  - jstests/core/version_api_v1_command_coverage.js
  - jstests/core/views/view_with_invalid_dbname.js
  - jstests/core/views/views_count.js
  - jstests/core/write/batch_write_command_w0.js
  - jstests/core/write/crud_api.js
  - jstests/core/write/crud_ops_do_not_throw_locktimeout.js
  - jstests/core/write/write_change_stream_pit_preimage.js



  exclude_with_any_tags:
  - assumes_superuser_permissions
  - requires_eval_command
  - requires_spawning_own_processes
  - uses_multiple_connections
  - uses_testing_only_commands

executor:
  config:
    shell_options:
      eval: var testingReplication = true;
      ssl: ''
